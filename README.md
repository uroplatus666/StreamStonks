
## **StreamStonks**: An end-to-end MLOps platform for real-time stock price prediction.  
Built with microservices architecture using Kafka, PostgreSQL, CatBoost, and Streamlit.  
Features automated data ingestion, scheduled model retraining, and system health monitoring via Grafana.  

–¶–µ–Ω—ã –∞–∫—Ü–∏–π –≤—ã–≥—Ä—É–∂–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é [T-Invest API](https://www.tinkoff.ru/invest/)
## ‚úèÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
project/
‚îú‚îÄ‚îÄ docker-compose.yml        # –û–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ Dockerfile                # –ï–¥–∏–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–±–æ—Ä–∫–∏ (–∫–æ–ø–∏—Ä—É–µ—Ç –≤—Å—ë)
‚îú‚îÄ‚îÄ .env                      # –ü–∞—Ä–æ–ª–∏ –∏ —Ç–æ–∫–µ–Ω—ã
‚îú‚îÄ‚îÄ requirements.txt          # –°–ø–∏—Å–æ–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫
‚îú‚îÄ‚îÄ catboost_model.cbm        # (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –º–æ–¥–µ–ª–∏ –≤ –∫–æ—Ä–Ω–µ
‚îÇ
‚îú‚îÄ‚îÄ ingest/                   # –°–ï–†–í–ò–° –ó–ê–ì–†–£–ó–ö–ò –î–ê–ù–ù–´–•
‚îÇ   ‚îî‚îÄ‚îÄ ingest.py             # –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ ml/                       # ML –°–ï–†–í–ò–°–´
‚îÇ   ‚îú‚îÄ‚îÄ ml_worker.py          # –û–±—Ä–∞–±–æ—Ç–∫–∞ Kafka —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ train_model.py        # –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ scheduler.py          # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ catboost_model.cbm    # –§–∞–π–ª –º–æ–¥–µ–ª–∏
‚îÇ
‚îú‚îÄ‚îÄ dashboard/                # UI –°–ï–†–í–ò–°
‚îÇ   ‚îî‚îÄ‚îÄ dashboard.py          # Streamlit –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ
‚îú‚îÄ‚îÄ db_init/                  # –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ schema.sql            # –¢–∞–±–ª–∏—Ü—ã 
‚îÇ   ‚îî‚îÄ‚îÄ dump.sql              # –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ
‚îú‚îÄ‚îÄ shared_models/            # (–ü—É—Å—Ç–∞—è –ø–∞–ø–∫–∞) –°–æ–∑–¥–∞–µ—Ç—Å—è Docker-–æ–º –¥–ª—è –æ–±–º–µ–Ω–∞ —Ñ–∞–π–ª–∞–º–∏
‚îÇ
‚îú‚îÄ‚îÄ grafana/                  # –ù–ê–°–¢–†–û–ô–ö–ò –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê
‚îÇ   ‚îú‚îÄ‚îÄ provisioning/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ datasources/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ datasource.yml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dashboards/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ dashboard.yml
‚îÇ   ‚îî‚îÄ‚îÄ dashboards_json/
‚îÇ       ‚îî‚îÄ‚îÄ dashboard.json
‚îî‚îÄ‚îÄ README.md
```
## üîå –ó–∞–Ω—è—Ç—ã–µ –ø–æ—Ä—Ç—ã

–†–∞–∑–≤–µ—Ä–Ω—É—Ç–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ—Ä—Ç—ã:
## üåê –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º –∏ –ü–æ—Ä—Ç—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ `docker-compose up -d`, —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –∞–¥—Ä–µ—Å–∞–º:

### üñ•Ô∏è –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

| –°–µ—Ä–≤–∏—Å | URL | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- | :--- |
| **Streamlit UI** | **[http://localhost:8501](http://localhost:8501)** | `8501` | –û—Å–Ω–æ–≤–Ω–æ–π –¥–∞—à–±–æ—Ä–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø—Ä–æ–≥–Ω–æ–∑—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∏) |
| **Grafana** | **[http://localhost:3000](http://localhost:3000)** | `3000` | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ –∏ –ª–æ–≥–æ–≤. <br>*(–õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `admin` / `admin`)* |

### ‚öôÔ∏è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

| –°–µ—Ä–≤–∏—Å | –ê–¥—Ä–µ—Å —Ö–æ—Å—Ç–∞ | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- | :--- |
| **PostgreSQL** | `localhost` | `5432` | –û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (`market_db`) |
| **Kafka (External)**| `localhost` | `9095` | –ë—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π (–¥–æ—Å—Ç—É–ø —Å–Ω–∞—Ä—É–∂–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤) |
| **Kafka (Internal)**| `kafka` | `9092` | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ |
| **Zookeeper** | `localhost` | `2181` | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä Kafka |

### ü§ñ –§–æ–Ω–æ–≤—ã–µ –≤–æ—Ä–∫–µ—Ä—ã (–±–µ–∑ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤)
–°–ª–µ–¥—É—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ñ–æ–Ω–µ –∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
* `ingest_worker` ‚Äî –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
* `ml_worker` ‚Äî ML-–∏–Ω—Ñ–µ—Ä–µ–Ω—Å
* `ml_scheduler` ‚Äî –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–æ–æ–±—É—á–µ–Ω–∏—è


### üìäMLOps Dashboard (Grafana)–î–∞—à–±–æ—Ä–¥ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ML-—Å–µ—Ä–≤–∏—Å–∞ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞–Ω–µ–ª–∏:**

* **System Health:** –¢–µ–∫—É—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (RPS), —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –º–æ–¥–µ–ª–∏ (Latency) –∏ –æ–±—â–µ–µ —á–∏—Å–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤.
* **ML Analytics:** –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º —Ç–∏–∫–µ—Ä–∞–º –∏ —Ç—Ä–µ–Ω–¥—ã –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ (—Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π "–†–æ—Å—Ç" vs "–ü–∞–¥–µ–Ω–∏–µ").
* **Data Quality:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–≤–µ—á–µ–π –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ü–µ–Ω.
* **Logs:** –î–µ—Ç–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞ –∏ –≤—Ä–µ–º–µ–Ω–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏.

### üìàStreamlit UI
![example-1](images/streamlit1.jpg)
__________________________________________________

![example-1](images/streamlit2.jpg)
__________________________________________________


